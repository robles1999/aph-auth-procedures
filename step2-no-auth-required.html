<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Evaluation Steps</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Tailwind + Extended Config -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ["Inter", "sans-serif"],
            },
            colors: {
              primary: "#3B82F6",
              accent: "#EC4899",
            },
            boxShadow: {
              glass: "0 8px 32px 0 rgba(31, 38, 135, 0.1)",
            },
          },
        },
      };
    </script>
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Font: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>

  <body class="bg-gray-100 text-gray-900 font-sans">
    <main class="p-6 max-w-5xl mx-auto">
      <!-- Navigation Buttons -->

      <!-- All Plans Link -->
      <div class="flex flex-wrap gap-4 mb-6">
        <a
          href="index.html"
          class="inline-flex items-center gap-2 px-4 py-2 bg-white/90 backdrop-blur-sm border border-gray-200 rounded-full text-sm font-medium text-primary hover:bg-primary/10 hover:shadow-md transition"
        >
          <span class="text-lg leading-none">‚Üê</span>
          All Plans
        </a>

        <!-- Plan Overview Link -->
        <a
          href="step1.html"
          class="inline-flex items-center gap-2 px-4 py-2 bg-white/90 backdrop-blur-sm border border-gray-200 rounded-full text-sm font-medium text-primary hover:bg-primary/10 hover:shadow-md transition"
        >
          <span class="text-lg leading-none">‚Üê</span>
          Plan Overview
        </a>
      </div>

      <!-- Page Under Construction Card -->
      <div
        class="bg-yellow-100 border border-yellow-300 text-yellow-800 rounded-xl p-4 mb-6 text-center shadow-md"
      >
        <h3 class="text-xl font-semibold mb-1">üöß Page Under Construction</h3>
        <p class="text-sm">
          We're working hard to bring this page to life. Please check back soon!
        </p>
      </div>

      <!-- Plan Header Card -->

      <section
        class="bg-white/90 backdrop-blur-sm rounded-2xl p-6 mb-6 border border-gray-200 shadow-lg"
      >
        <div class="flex items-center space-x-4">
          <div id="plan-logo" class="text-4xl">üè•</div>
          <div>
            <h2 id="plan-name" class="text-2xl font-bold text-gray-900">
              Plan Name
            </h2>
            <p id="plan-category" class="text-gray-600">Category</p>
          </div>

          <div class="ml-auto p-3 rounded-xl bg-blue-100 flex items-center">
            <span class="text-primary text-2xl">ü©∫</span>
          </div>
        </div>
      </section>

      <!-- Authorization Notice -->

      <!--       <section
        class="bg-blue-50/80 backdrop-blur-sm rounded-2xl p-6 mb-6 border-2 border-blue-200 shadow-lg"
      >
        <div class="flex items-center space-x-3 mb-3">
          <span class="w-6 h-6 text-blue-600 block">‚ö†Ô∏è</span>
          <h3 class="text-lg font-semibold text-blue-800">
            Authorization required before evaluation.
          </h3>
        </div>
        <p class="text-sm text-blue-700">
          Submit the evaluation authorization form.
        </p>
      </section> -->

      <!-- Required Steps -->

      <section
        class="bg-white/90 backdrop-blur-sm rounded-2xl p-6 mb-6 border border-gray-200 shadow-lg"
      >
        <h2 class="font-bold italic text-red-600 text-2xl">Epic</h2>
        <h3 class="text-xl font-semibold text-gray-900 mb-4">
          Required Preparation Steps
        </h3>
        <div class="space-y-4">
          <!-- Required Step 1 -->

          <div class="flex items-start space-x-4">
            <div
              class="w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-semibold text-sm mt-1"
            >
              1
            </div>
            <div class="flex-1 p-4 bg-gray-100/80 rounded-lg">
              <p class="font-medium text-gray-900">
                Review referral communications history. Continue with
                verification if needed.
              </p>
            </div>
          </div>

          <!-- Step 2 -->

          <div class="flex items-start space-x-4">
            <div
              class="w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-semibold text-sm mt-1"
            >
              2
            </div>
            <div class="flex-1 p-4 bg-gray-100/80 rounded-lg">
              <p class="font-medium text-gray-900">
                Gather required RX document (print and/or save to computer)
              </p>
            </div>
          </div>

          <!-- Step 3 -->

          <div class="flex items-start space-x-4">
            <div
              class="w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-semibold text-sm mt-1"
            >
              3
            </div>
            <div class="flex-1 p-4 bg-gray-100/80 rounded-lg">
              <p class="font-medium text-gray-900">
                Run Passport to ensure eligibility
              </p>
            </div>
          </div>

          <!-- Step 4 -->
          <!--
          <div class="flex items-start space-x-4">
            <div
              class="w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-semibold text-sm mt-1"
            >
              4
            </div>
            <div class="flex-1 p-4 bg-gray-100/80 rounded-lg">
              <p class="font-medium text-gray-900">Submit to payer portal</p>
            </div>
          </div> -->

          <!-- Step 5 -->
          <!--
          <div class="flex items-start space-x-4">
            <div
              class="w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-semibold text-sm mt-1"
            >
              5
            </div>
            <div class="flex-1 p-4 bg-gray-100/80 rounded-lg">
              <p class="font-medium text-gray-900">
                Receive authorization response
              </p>
            </div>
          </div> -->
        </div>
      </section>

      <!-- Action & Info Grid -->

      <!-- <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"> -->
      <!-- Access Portal -->

      <!-- <section
          class="bg-white/90 backdrop-blur-sm rounded-2xl p-6 border border-gray-200 shadow-lg"
        >
          <div class="flex items-center space-x-3 mb-4">
            <div
              class="p-3 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl"
            >
              <span class="w-6 h-6 text-white block">üîó</span>
            </div>
            <div>
              <h4 class="font-semibold text-gray-900 text-lg">Access Portal</h4>
              <p class="text-gray-600 text-sm">Insurance Portal</p>
            </div>
          </div>
          <a
            id="openPortalBtn"
            href="#"
            class="w-full block text-center bg-gradient-to-r from-green-600 to-emerald-600 text-white py-3 rounded-xl font-semibold hover:from-green-700 hover:to-emerald-700 transition shadow-lg mb-6"
            >Open Portal</a
          >

          <a
            id="openInstructionsPortalBtn"
            href="#"
            class="w-full block text-center bg-gradient-to-r from-red-600 to-yellow-600 text-white py-3 rounded-xl font-semibold hover:from-red-700 hover:to-yellow-700 transition shadow-lg"
          >
            Portal Specific Instructions
          </a>
        </section> -->

      <!-- üëáüëá Modal background üëáüëá -->
      <!-- <div
          id="portalModal"
          class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50"
        > -->
      <!-- Modal content -->
      <!-- <div
            class="bg-white rounded-xl shadow-lg p-6 max-w-sm text-center mx-4"
          >
            <h2 class="text-lg font-semibold mb-3">Coming Soon</h2>
            <p class="text-gray-600 mb-4">
              Portal-specific instructions will be available here soon.
            </p>
            <button
              id="closeModalBtn"
              class="px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400 transition"
            >
              Close
            </button>
          </div>
        </div> -->
      <!-- üëÜüëÜ Modal code ends here üëÜüëÜ -->

      <!-- Required Information -->

      <!-- <section
          class="bg-white/90 backdrop-blur-sm rounded-2xl p-6 border border-gray-200 shadow-lg"
        >
          <div class="flex items-center space-x-3 mb-4">
            <div
              class="p-3 bg-gradient-to-r from-purple-500 to-pink-600 rounded-xl"
            >
              <span class="w-6 h-6 text-white block">üìÑ</span>
            </div>
            <div>
              <h4 class="font-semibold text-gray-900 text-lg">
                Required Information
              </h4>
              <p class="text-gray-600 text-sm">Prepare these items</p>
            </div>
          </div>
          <ul class="space-y-2 text-sm text-gray-700">
            <li class="flex items-start space-x-2">
              <span class="w-4 h-4 text-green-600 mt-0.5 block">‚úì</span>
              <span>Valid RX (Prescription/Referral)</span>
            </li>

            <li class="flex items-start space-x-2">
              <span class="w-4 h-4 text-green-600 mt-0.5 block">‚úì</span>
              <span>Patient insurance id</span>
            </li>

            <li class="flex items-start space-x-2">
              <span class="w-4 h-4 text-green-600 mt-0.5 block">‚úì</span>
              <span>Provider NPI: 1184709057</span>
            </li>

            <li class="flex items-start space-x-2">
              <span class="w-4 h-4 text-green-600 mt-0.5 block">‚úì</span>
              <span>Tax Id: 591726273</span>
            </li>
          </ul>
        </section> -->
      <!-- </div> -->

      <!-- Key Information -->

      <!-- <section
                     class="bg-white/90 backdrop-blur-sm rounded-2xl p-6
             border border-gray-200 shadow-lg mb-6">
                <h4 class="font-semibold text-gray-900 text-lg mb-4">Key Information</h4>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-sm">

                    <div class="p-3 bg-blue-50 rounded-lg">
                        <div class="font-medium text-blue-900">Provider NPI</div>
                        <div class="text-blue-700">1184709057</div>
                    </div>

                    <div class="p-3 bg-blue-50 rounded-lg">
                        <div class="font-medium text-blue-900">Tax Id</div>
                        <div class="text-blue-700">591726273</div>
                    </div>

                    <div class="p-3 bg-blue-50 rounded-lg">
                        <div class="font-medium text-blue-900">Phone</div>
                        <div class="text-blue-700">321-841-2261</div>
                    </div>

                    <div class="p-3 bg-blue-50 rounded-lg">
                        <div class="font-medium text-blue-900">Fax</div>
                        <div class="text-blue-700">321-843-1481</div>
                    </div>

                </div>
            </section> -->

      <!-- Required Steps After Portal-->

      <section
        class="bg-white/90 backdrop-blur-sm rounded-2xl p-6 mb-6 border border-gray-200 shadow-lg"
      >
        <h2 class="font-bold italic text-red-600 text-2xl">Epic</h2>
        <h3 class="text-xl font-semibold text-gray-900 mb-4">
          Referral Update Steps by Section
        </h3>
        <div class="space-y-4">
          <!-- After Portal Required Step 1 -->

          <div class="flex items-start space-x-4">
            <div
              class="w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-semibold text-sm mt-1"
            >
              1
            </div>

            <div class="flex-1 p-4 bg-gray-100/80 rounded-lg">
              <h2 class="font-medium text-gray-900 text-lg">
                <span>‚úî </span>General
              </h2>
              <div class="flex-1 p-4 bg-gray-100/80 rounded-lg space-y-6">
                <!-- <h2 class="font-medium text-gray-900 text-md">
                  Authorization Scenarios
                </h2> -->

                <div class="text-gray-900">
                  <p>
                    <span class="font-semibold"
                      >Authorization is not required:</span
                    >
                  </p>
                  <ul class="list-disc list-outside pl-5 ml-4">
                    <li><span class="font-bold">Status</span>: Authorized</li>
                    <li>
                      <span class="font-bold">Pend Reason</span>: No Payer Auth
                      Required
                    </li>
                  </ul>
                </div>

                <!-- <div class="text-gray-900">
                  <p><span class="font-semibold">If authorized:</span></p>
                  <ul class="list-disc list-outside pl-5 ml-4">
                    <li><span class="font-bold">Status</span>: Authorized</li>
                    <li>
                      <span class="font-bold">Pend Reason</span>: Received payer
                      authorization
                    </li>
                  </ul>
                </div> -->

                <!-- <div class="text-gray-900">
                  <p>
                    <span class="font-semibold"
                      >If authorization is pending:</span
                    >
                  </p>
                  <ul class="list-disc list-outside pl-5 ml-4">
                    <li>
                      <span class="font-bold">Status</span>: Pending review
                    </li>
                    <li>
                      <span class="font-bold">Pend Reason</span>: Authorization
                      initiated
                    </li>
                  </ul>
                </div> -->
              </div>
            </div>

            <!--  Replacing section
                        <div class="flex-1 p-4 bg-gray-100/80 rounded-lg">
                            <p class="font-medium text-gray-900">General</p>
			    <p class="text-gray-900">
				<span>If no auth required</span>: <span class="font-bold">Status</span>= Authorized,  
				<span class="font-bold">Pend Reason</span> = No Payer Auth Required</p>
			    <p class="text-gray-900">If authorized = Authorized > Received Payer Authorization</p>
			    <p class="text-gray-900">If pending auth = Pending Review > Authorization Initiated</p>
                        </div>
		   -->
          </div>

          <!-- After Portal Step 2 -->

          <div class="flex items-start space-x-4">
            <div
              class="w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-semibold text-sm mt-1"
            >
              2
            </div>
            <div class="flex-1 p-4 bg-gray-100/80 rounded-lg">
              <p class="font-medium text-gray-900 text-lg">
                <span>‚ùì</span>Communications
              </p>
              <div class="flex-1 p-4 bg-gray-100/80 rounded-lg space-y-6">
                <!-- <h2 class="font-medium text-gray-900 text-md">
                  Authorization Scenarios
                </h2> -->

                <!-- No Auth Required -->
                <div class="text-gray-900 space-y-2">
                  <!--  <p class="font-semibold">Authorization is not Required:</p> -->
                  <ul class="list-disc list-outside pl-5 ml-4 space-y-1">
                    <li>
                      <span class="font-bold">Add no auth required note:</span>
                      <span class="italic">Smartphrase:</span>
                      <span class="font-bold">SUNSHINEHMO2025</span>
                    </li>
                    <!-- <li>
                      <span class="font-bold">Scan the Portal result then</span
                      >:
                    </li>
                    <ul class="list-disc list-outside pl-5 ml-6">
                      <li>Import document into Epic</li>
                      <li>
                        <span class="font-bold">Document Description</span>:
                        RESPONSE FROM {insurance}
                      </li>
                    </ul> -->
                  </ul>
                </div>

                <!-- Authorized -->
                <!-- <div class="text-gray-900 space-y-2">
                  <p class="font-semibold">If Authorized:</p>
                  <ul class="list-disc list-outside pl-5 ml-4 space-y-1">
                    <li>
                      <span class="font-bold">Add a PB Note</span>: AUTH
                      SUBMITTED TO {insurance}
                    </li>
                    <li>
                      Add and fillout the
                      <span class="font-bold">OSSAUTH</span> note
                    </li>
                  </ul>
                </div> -->

                <!-- Pending or Manual Auth -->
                <!-- <div class="text-gray-900 space-y-2">
                  <p class="font-semibold">
                    If Auth is PENDING or Manual Auth was submitted:
                  </p>
                  <ul class="list-disc list-outside pl-5 ml-4 space-y-1">
                    <li>
                      <span class="font-bold">Add a PB Note</span>: SENT
                      {discipline} AUTH REQUEST TO {insurance}. AUTH PENDING.
                    </li>
                    <li>
                      Referral Icon
                      <span class="text-red-600 font-bold">(X)</span> will
                      remain <span class="text-red-600 font-bold">Red</span>
                    </li>
                    <li class="text-gray-700">
                      No further changes needed until AUTH is approved.
                    </li>
                  </ul>
                </div> -->
              </div>
            </div>
          </div>

          <!-- After Portal Step 3 -->

          <div class="flex items-start space-x-4">
            <div
              class="w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-semibold text-sm mt-1"
            >
              3
            </div>
            <div class="flex-1 p-4 bg-gray-100/80 rounded-lg">
              <p class="font-medium text-gray-900 text-lg">‚ùìScheduling</p>
              <div class="flex-1 p-4 bg-gray-100/80 rounded-lg space-y-6">
                <div class="text-gray-900 space-y-2">
                  <ul class="list-disc list-outside pl-5 ml-4 space-y-1">
                    <li class="font-medium text-gray-900 text-md">
                      <span class="font-bold">Scheduling Status:</span> Ready to
                      Schedule
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <!-- Step 4 Authorization -->

          <div class="flex items-start space-x-4">
            <div
              class="w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-semibold text-sm mt-1"
            >
              4
            </div>
            <div class="flex-1 p-4 bg-gray-100/80 rounded-lg">
              <p class="font-medium text-gray-900 text-lg">‚ùìAuthorization</p>
              <div class="flex-1 p-4 bg-gray-100/80 rounded-lg space-y-6">
                <div class="text-gray-900 space-y-2">
                  <ul class="list-disc list-outside pl-5 ml-4 space-y-1">
                    <li><span class="font-bold">Requested:</span> 150</li>
                    <li><span class="font-bold">Authorized:</span> 150</li>
                    <li>
                      <span class="font-bold">Start Date:</span> Start Date of
                      treatment
                    </li>
                    <li>
                      <span class="font-bold">Expiration Date:</span> December
                      31, of current year
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <!-- Step 5 Coverage Authorization -->
          <div class="flex items-start space-x-4">
            <div
              class="w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-semibold text-sm mt-1"
            >
              5
            </div>
            <div class="flex-1 p-4 bg-gray-100/80 rounded-lg">
              <p class="font-medium text-gray-900 text-lg">
                ‚ùìCoverage Authorization
              </p>
              <div class="flex-1 p-4 bg-gray-100/80 rounded-lg space-y-6">
                <!-- <h2 class="font-medium text-gray-900 text-md">
                  Authorization Scenarios
                </h2> -->
                <!-- PLACE HOLDER -->
                <div class="text-gray-900 space-y-2">
                  <ul class="list-disc list-outside pl-5 ml-4 space-y-1">
                    <!-- <li>
                      <span class="font-bold">Auth #:</span> Enter received
                      Authorization or Confirmation number
                    </li> -->
                    <li>
                      <span class="font-bold">Authorized Dates:</span> Start
                      date of treatment - end of year
                    </li>
                  </ul>
                </div>
                <!-- If No Auth Required -->
                <div class="text-gray-900 space-y-2">
                  <p class="font-semibold">Click on CPT/HCPCS</p>
                  <ul class="list-disc list-outside pl-5 ml-4 space-y-1">
                    <li>
                      <span class="font-bold">Service Code:</span> Enter the CPT
                      code for the requested discipline
                    </li>
                    <li>
                      <span class="font-bold">Auth Status:</span> No Auth
                      Required
                    </li>
                    <li><span class="font-bold">Auth #:</span> N/A</li>
                    <li>
                      <span class="font-bold">Authorized Dates:</span> Start
                      date of treatment - end of year
                    </li>
                    <li><span class="font-bold">Requested:</span> 150</li>
                    <li><span class="font-bold">Approved:</span> 150</li>
                  </ul>
                </div>

                <!-- PLACE HOLDER -->
                <!-- <div class="text-gray-900 space-y-2">
                  <p class="font-semibold">{PLACE HOLDER}</p>
                  <ul class="list-disc list-outside pl-5 ml-4 space-y-1">
                    <li>{PLACE HOLDER}</li>
                    <li>{PLACE HOLDER}</li>
                  </ul>
                </div> -->
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- JavaScript -->

    <script>
      // pull dataset and current plan
      const plans = JSON.parse(localStorage.getItem("insurancePlans") || "{}");
      const name = localStorage.getItem("currentPlanName") || "";
      const plan = plans[name] || {};

      // fill header card‚Ä¶
      document.getElementById("plan-logo").textContent = plan.logo || "üè•";
      document.getElementById("plan-name").textContent = name;
      document.getElementById("plan-category").textContent =
        plan.category || "";

      // 2) set the portal button href dynamically
      const openPortalBtn = document.getElementById("openPortalBtn");
      if (plan.ivPortalUrl) {
        openPortalBtn.href = plan.ivPortalUrl;
        openPortalBtn.setAttribute("target", "_blank");
      } else {
        // fallback: disable or hide
        openPortalBtn.href = "#";
        openPortalBtn.classList.add("opacity-50", "cursor-not-allowed");
        openPortalBtn.removeAttribute("hover:from-green-700");
      }

      // Modal script (red button)
      document.addEventListener("DOMContentLoaded", () => {
        const instructionsBtn = document.getElementById(
          "openInstructionsPortalBtn"
        );
        const modal = document.getElementById("portalModal");
        const closeBtn = document.getElementById("closeModalBtn");

        if (!instructionsBtn || !modal || !closeBtn) {
          console.warn("Modal elements not found in DOM");
          return;
        }

        instructionsBtn.addEventListener("click", (e) => {
          e.preventDefault();
          console.log("clicked"); // debugging
          modal.classList.remove("hidden");
        });

        closeBtn.addEventListener("click", () => {
          modal.classList.add("hidden");
        });

        modal.addEventListener("click", (e) => {
          if (e.target === modal) {
            modal.classList.add("hidden");
          }
        });

        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape") {
            modal.classList.add("hidden");
          }
        });
      });
    </script>
  </body>
</html>
