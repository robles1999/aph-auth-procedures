<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Plan Overview</title>
    life_8868458-64px.png
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Tailwind + Extended Config -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ["Inter", "sans-serif"],
            },
            colors: {
              primary: "#3B82F6",
              accent: "#EC4899",
            },
            boxShadow: {
              glass: "0 8px 32px 0 rgba(31, 38, 135, 0.1)",
            },
          },
        },
      };
    </script>
    https://cdn.tailwindcss.com</script>

    <!-- Google Font: Inter -->
    https://fonts.googleapis.com
    https://fonts.gstatic.com
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
-gray-900 font-sans">
    <main class="p-6 max-w-5xl mx-auto">
      <!-- Back to All Plans -->
      <a
        href="index.html"
        class="inline-flex items-center gap-2 mb-6 px-4 py-2 bg-white/90 backdropard -->
      <div
        class="bg-white/90 backdrop-blur-sm border border-gray-200 rounded-2xl p-6 mb-8 text-center shadow-lg"
      >
        <div id="plan-logo" class="text-4xl mb-2">üè•</div>
        <h3 id="plan-name" class="text-2xl font-bold mb-1">Plan Name</h3>
        <p id="plan-category" class="text-gray-600 mb-4">Category</p>
      </div>

      <!-- Evaluation & Treatment Cards -->
      <div class="flex flex-wrap justify-center gap-10">
        <!-- Evaluation Card -->
        <a
          id="eval-link"
          href="step2-eval.html"
          onclick="localStorage.setItem('currentService','eval')"
          class="w-72 bg-white/90 backdrop-blur-sm     class="inline-block text-sm px-3 py-1 rounded-full border mx-auto mb-3"
          >
            Status
          </div>
          <p id="eval-sub" class="text-gray-600 text-sm">Subtitle</p>

          <!-- üëá EVAL Special instructions will go here -->
          <p
            id="eval-instructions"
            class="text-red-500 font-semibold text-sm mt-2 text-center"
          ></p>
        </a>

        <!-- Treatment Card -->
        step2-treatment.html
          <h4 class="text-2xl font-semibold mb-6">
            Treatment Visit <span>üíä</span>
          </h4>
          <div
            id="treat-pill"
            class="inline-block text-sm px-3 py-1 rounded-full border mx-auto mb-3"
          >
            Status
          </div>
          <p id="treat-sub" class="text-gray-600 text-sm">Subtitle</p>

          <!-- üëá TREATMENT Special instructions will go here -->
          <p
            id="treat-instructions"
            class="text-red-500 font-semibold text-sm mt-2 text-center"
          ></p>
        </a>
      </div>
    </main>

    <script>
      // =======================
      // Data pull and header
      // =======================
      const plans = JSON.parse(localStorage.getItem("insurancePlans") || "{}");
      const name = localStorage.getItem("currentPlanName") || "";
      const plan = plans[name] || {};

      document.getElementById("plan-logo").textContent = plan.logo || "üè•";
      document.getElementById("plan-name").textContent = name;
      document.getElementById("plan-category").textContent = plan.category || "";

      // =======================
      // DOM refs
      // =======================
      const evalPill = document.getElementById("eval-pill");
      const evalSub  = document.getElementById("eval-sub");
      const evalLink = document.getElementById("eval-link");

      const trPill = document.getElementById("treat-pill");
      const trSub  = document.getElementById("treat-sub");
      const txLink = document.getElementById("tx-link");

      // =======================
      // Helpers
      // =======================
      function resetStatusClasses(el) {
        if (!el) return;
        el.classList.remove(
          "bg-red-100","text-red-700","border-red-300",
          "bg-green-100","text-green-700","border-green-300",
          "bg-amber-100","text-amber-800","border-amber-300",
          "bg-gray-100","text-gray-700","border-gray-300",
          "bg-blue-100","text-blue-700","border-blue-300",
          "border"
        );
      }

      // Replace an <a> with a <div> to disable click & hover cursor
      function replaceLinkWithDiv(anchorEl) {
        if (!anchorEl || anchorEl.tagName !== "A") return anchorEl;

        const div = document.createElement("div");
        div.id = anchorEl.id;

        // Remove hover/transform/transition/cursor-pointer for non-interactive look
        const classes = anchorEl.className
          .split(/\s+/)
          .filter(cls =>
            !cls.startsWith("hover:") &&
            cls !== "transform" &&
            !cls.startsWith("transition") &&
            !cls.startsWith("duration-") &&
            !cls.startsWith("ease-") &&
            cls !== "cursor-pointer"
          );

        // Neutral cursor
        classes.push("cursor-default");
        div.className = classes.join(" ");

        // Move children
        while (anchorEl.firstChild) {
          div.appendChild(anchorEl.firstChild);
        }

        anchorEl.replaceWith(div);
        return div;
      }

      // =======================
      // Evaluation routing
      // =======================
      if (plan.evalAuth === false && evalLink) {
        evalLink.setAttribute("href", "step2-no-auth-required.html");
      } else if (plan.evalAuth === "verification" && evalLink) {
        evalLink.setAttribute("href", "step2-iv.html");
      }

      // =======================
      // Treatment routing
      // =======================
      const trAuth = plan.treatmentAuth;

      if (trAuth === false && txLink) {
        // No auth required ‚Üí direct to the simple treatment flow
        txLink.setAttribute("href", "step2-no-auth-req-treatment.html");
      } else if (String(trAuth).toLowerCase() === "undetermined" && txLink) {
        // Disable navigation entirely
        const txCardDiv = replaceLinkWithDiv(txLink);
        txCardDiv.setAttribute("title", "Authorization status is undetermined");
        // No href assigned ‚Äî it's now a non-clickable card.
      } else if (txLink) {
        // Default treatment flow (auth required)
        txLink.setAttribute("href", "step2-treatment.html");
      }

      // =======================
      // Evaluation pill
      // =======================
      resetStatusClasses(evalPill);
      if (plan.evalAuth === false) {
        evalPill.textContent = "No Authorization Required";
        evalPill.classList.add("bg-green-100","text-green-700","border","border-green-300");
        evalSub.textContent = "Proceed with evaluation.";
      } else if (plan.evalAuth === "verification") {
        evalPill.textContent = "Verification Required";
        evalPill.classList.add("bg-blue-100","text-blue-700","border","border-blue-300");
        evalSub.textContent = "Verify insurance before eval.";
      } else {
        evalPill.textContent = "Authorization Required";
        evalPill.classList.add("bg-red-100","text-red-700","border","border-red-300");
        evalSub.textContent = "Submit auth before evaluation.";
      }

      // =======================
      // Treatment pill
      // =======================
      resetStatusClasses(trPill);

      if (trAuth === true) {
        trPill.textContent = "Authorization Required";
        trPill.classList.add("bg-red-100","text-red-700","border","border-red-300");
        trSub.textContent = "Submit auth before treatment.";
      } else if (trAuth === false) {
        trPill.textContent = "No Authorization Required";
        trPill.classList.add("bg-green-100","text-green-700","border","border-green-300");
        trSub.textContent = "Proceed with treatment.";
      } else if (String(trAuth).toLowerCase() === "undetermined") {
        trPill.textContent = "Authorization Undetermined";
        trPill.classList.add("bg-amber-100","text-amber-800","border","border-amber-300");
        trSub.textContent = "Status unclear‚Äîverify requirements.";
      } else {
        // Fallback (not expected with your constraints)
        trPill.textContent = "Authorization Unknown";
        trPill.classList.add("bg-gray-100","text-gray-700","border","border-gray-300");
        trSub.textContent = "No status available‚Äîcheck documentation.";
      }

      // =======================
      // EVAL special instructions
      // =======================
      const evalInstructionsContainer = document.getElementById("eval-instructions");
      evalInstructionsContainer.innerHTML = "";

      if (Array.isArray(plan.evalSpecialInstructions) && plan.evalSpecialInstructions.length > 0) {
        plan.evalSpecialInstructions.forEach((instr) => {
          const p = document.createElement("p");
          p.textContent = instr;
          evalInstructionsContainer.appendChild(p);
        });
      }

      // =======================
      // TREATMENT special instructions
      // =======================
      const instructionsContainer = document.getElementById("treat-instructions");
      instructionsContainer.innerHTML = "";

      if (Array.isArray(plan.txSpecialInstructions) && plan.txSpecialInstructions.length > 0) {
        plan.txSpecialInstructions.forEach((instr) => {
          const p = document.createElement("p");
          p.textContent = instr;
          instructionsContainer.appendChild(p);
        });
      }
    </script>
  </body>
</html>
